const a21_0x68fed5=a21_0x374f;function a21_0x374f(_0x4de1df,_0x299385){const _0x2a3c7e=a21_0x2a3c();return a21_0x374f=function(_0x374ff5,_0x2096d1){_0x374ff5=_0x374ff5-0xdc;let _0x47789e=_0x2a3c7e[_0x374ff5];return _0x47789e;},a21_0x374f(_0x4de1df,_0x299385);}(function(_0x332364,_0x4d3809){const _0x3faee2=a21_0x374f,_0x3a160a=_0x332364();while(!![]){try{const _0x3051a8=-parseInt(_0x3faee2(0xeb))/0x1+-parseInt(_0x3faee2(0xe3))/0x2+-parseInt(_0x3faee2(0xe1))/0x3*(-parseInt(_0x3faee2(0xdf))/0x4)+-parseInt(_0x3faee2(0xe2))/0x5+-parseInt(_0x3faee2(0xe8))/0x6+parseInt(_0x3faee2(0xdc))/0x7+parseInt(_0x3faee2(0xe6))/0x8;if(_0x3051a8===_0x4d3809)break;else _0x3a160a['push'](_0x3a160a['shift']());}catch(_0x1c7fa5){_0x3a160a['push'](_0x3a160a['shift']());}}}(a21_0x2a3c,0x46bef));function a21_0x2a3c(){const _0xdace74=['addDevice','6180680uCcNHJ','https://s3.amazonaws.com/download.youfy.com.br/bots/','3158382uZuQfX','755','.zip','275002vcLyrT','3971821jyAWRX','getId','data','168508znwwAV','pipe','33HILZoU','2065810qBITHH','598098NlHimM','finished'];a21_0x2a3c=function(){return _0xdace74;};return a21_0x2a3c();}const axios=require('axios'),{createReadStream,createWriteStream,existsSync,rmSync,chmodSync,mkdirSync}=require('fs'),{resolve}=require('path'),{botsPath,getBotFile}=require('./utils'),{platform}=require('os'),Device=require('./device'),unzipper=require('unzipper'),stream=require('stream'),{promisify}=require('util'),BotApi=require('../api/BotApi'),finished=promisify(stream[a21_0x68fed5(0xe4)]),DEVICE_ID=Device[a21_0x68fed5(0xdd)]();async function uninstall({botId:_0x51256b}){const _0x183817=getBotFile(_0x51256b);rmSync(_0x183817,{'force':!![]}),await BotApi['removeDevice'](_0x51256b,DEVICE_ID);}async function install({botId:_0x5884bf}){const _0x1643c1=a21_0x68fed5,_0x19ff06=platform();!existsSync(botsPath)&&mkdirSync(botsPath,{'recursive':!![],'force':!![]});const _0x4c209f=_0x5884bf+'_'+_0x19ff06,_0x20b6b1=resolve(botsPath,_0x4c209f+_0x1643c1(0xea)),_0x164eef=getBotFile(_0x5884bf);try{const _0x33dbed=await axios({'url':_0x1643c1(0xe7)+_0x5884bf+'/'+_0x4c209f+'.zip','method':'GET','responseType':'stream'}),_0x57436e=createWriteStream(_0x20b6b1);_0x33dbed[_0x1643c1(0xde)][_0x1643c1(0xe0)](_0x57436e),await finished(_0x57436e);const _0x34383a=unzipper['Extract']({'path':botsPath});createReadStream(_0x20b6b1)[_0x1643c1(0xe0)](_0x34383a);try{await finished(_0x34383a);}catch(_0x5736b9){}await BotApi[_0x1643c1(0xe5)](_0x5884bf,DEVICE_ID);}finally{rmSync(_0x20b6b1,{'force':!![]}),existsSync(_0x164eef)&&chmodSync(_0x164eef,_0x1643c1(0xe9));}}module['exports']={'uninstall':uninstall,'install':install};